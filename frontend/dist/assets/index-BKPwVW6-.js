import{a1 as R,a2 as B,aV as N,r as g,j as _,o as u,F as o,C as e,p as a,E as T,m as f,bY as A,aY as j,bZ as z,H,a9 as y,f as P,b_ as J,b$ as Z,a4 as G,J as O,c0 as Q,I as W,s as S,T as X,a3 as ee,k as q}from"./index-1cEe87gQ.js";import{D as L,l as D,E as M,F as K,d as se}from"./el-input-D_OuGaEd.js";import"./format-input-ejjDCr06.js";const ae={class:"login-form"},te={key:0},oe={key:1},le={__name:"LoginForm",emits:["success"],setup(F,{emit:h}){const V=h,i=B(),s=N({email:"",password:""}),n=g(!1),l=g(),d={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},w=async()=>{try{await l.value?.validate(),n.value=!0;const v=await i.login({email:s.email,login_type:"password",password:s.password});v.success?V("success",v.message):y.error(v.message)}catch(v){console.error("Login validation failed:",v)}finally{n.value=!1}};return(v,m)=>{const C=T,$=D,k=L,E=M,I=K;return u(),_("div",ae,[m[2]||(m[2]=o("div",{class:"form-header"},[o("h2",null,"欢迎回来"),o("p",null,"登录您的账户，继续创作之旅")],-1)),e(I,{ref_key:"formRef",ref:l,model:s,rules:d,onSubmit:H(w,["prevent"])},{default:a(()=>[e(k,{prop:"email"},{default:a(()=>[e($,{modelValue:s.email,"onUpdate:modelValue":m[0]||(m[0]=r=>s.email=r),type:"email",placeholder:"请输入邮箱地址",class:"custom-input",size:"default"},{prefix:a(()=>[e(C,{class:"input-icon"},{default:a(()=>[e(f(A))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(k,{prop:"password"},{default:a(()=>[e($,{modelValue:s.password,"onUpdate:modelValue":m[1]||(m[1]=r=>s.password=r),type:"password",placeholder:"请输入密码","show-password":"",class:"custom-input",size:"default",onKeyup:j(w,["enter"])},{prefix:a(()=>[e(C,{class:"input-icon"},{default:a(()=>[e(f(z))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(k,{class:"submit-item"},{default:a(()=>[e(E,{type:"primary",class:"login-btn",loading:n.value,onClick:w},{default:a(()=>[n.value?(u(),_("span",oe,"登录中...")):(u(),_("span",te,"立即登录"))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},re=R(le,[["__scopeId","data-v-5270422c"]]),ne={class:"register-form"},ie={class:"code-input-wrapper"},de={key:0},ue={key:1},ce={__name:"RegisterForm",emits:["success"],setup(F,{emit:h}){const V=h,i=B(),s=N({email:"",username:"",password:"",confirmPassword:"",code:""}),n=g(!1),l=g(!1),d=g(0),w=g(),m={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],username:[{min:2,message:"用户名长度不能少于2位",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(r,t,p)=>{t!==s.password?p(new Error("两次输入的密码不一致")):p()},trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码为6位数字",trigger:"blur"}]},C=P(()=>s.email&&d.value===0&&!l.value),$=P(()=>l.value?"发送中":d.value>0?`${d.value}s`:"发送验证码"),k=async()=>{if(!s.email){y.warning("请先输入邮箱");return}l.value=!0;try{const r=await i.sendVerificationCode(s.email);r.success?(y.success(r.message),E()):y.error(r.message)}finally{l.value=!1}},E=()=>{d.value=60;const r=setInterval(()=>{d.value--,d.value<=0&&clearInterval(r)},1e3)},I=async()=>{try{await w.value?.validate(),n.value=!0;const r={email:s.email,password:s.password,code:s.code};s.username&&(r.username=s.username);const t=await i.register(r);t.success?V("success",t.message):y.error(t.message)}catch(r){console.error("Register validation failed:",r)}finally{n.value=!1}};return(r,t)=>{const p=T,x=D,b=L,U=M,Y=K;return u(),_("div",ne,[t[5]||(t[5]=o("div",{class:"form-header"},[o("h2",null,"创建账户"),o("p",null,"加入我们，开启AI创作之旅")],-1)),e(Y,{ref_key:"formRef",ref:w,model:s,rules:m},{default:a(()=>[e(b,{prop:"email"},{default:a(()=>[e(x,{modelValue:s.email,"onUpdate:modelValue":t[0]||(t[0]=c=>s.email=c),type:"email",placeholder:"请输入邮箱地址",class:"custom-input",size:"default"},{prefix:a(()=>[e(p,{class:"input-icon"},{default:a(()=>[e(f(A))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(b,{prop:"username"},{default:a(()=>[e(x,{modelValue:s.username,"onUpdate:modelValue":t[1]||(t[1]=c=>s.username=c),placeholder:"请输入用户名（可选）",class:"custom-input",size:"default"},{prefix:a(()=>[e(p,{class:"input-icon"},{default:a(()=>[e(f(J))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(b,{prop:"code"},{default:a(()=>[o("div",ie,[e(x,{modelValue:s.code,"onUpdate:modelValue":t[2]||(t[2]=c=>s.code=c),placeholder:"请输入验证码",class:"custom-input code-input",size:"default"},{prefix:a(()=>[e(p,{class:"input-icon"},{default:a(()=>[e(f(Z))]),_:1})]),_:1},8,["modelValue"]),e(U,{class:"code-btn",size:"default",loading:l.value,disabled:!C.value,onClick:k},{default:a(()=>[G(O($.value),1)]),_:1},8,["loading","disabled"])])]),_:1}),e(b,{prop:"password"},{default:a(()=>[e(x,{modelValue:s.password,"onUpdate:modelValue":t[3]||(t[3]=c=>s.password=c),type:"password",placeholder:"请输入密码","show-password":"",class:"custom-input",size:"default"},{prefix:a(()=>[e(p,{class:"input-icon"},{default:a(()=>[e(f(z))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(b,{prop:"confirmPassword"},{default:a(()=>[e(x,{modelValue:s.confirmPassword,"onUpdate:modelValue":t[4]||(t[4]=c=>s.confirmPassword=c),type:"password",placeholder:"请再次输入密码","show-password":"",class:"custom-input",size:"default"},{prefix:a(()=>[e(p,{class:"input-icon"},{default:a(()=>[e(f(z))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(b,{class:"submit-item"},{default:a(()=>[e(U,{type:"primary",class:"register-btn",loading:n.value,onClick:I},{default:a(()=>[n.value?(u(),_("span",ue,"注册中...")):(u(),_("span",de,"立即注册"))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},me=R(ce,[["__scopeId","data-v-f654acfb"]]),pe={class:"auth-container"},fe={class:"auth-content"},_e={class:"form-section"},ve={class:"form-container"},ge={key:0,class:"mobile-logo"},we={class:"tab-switcher"},be={class:"form-content"},ye={__name:"index",setup(F){const h=ee(),{isMobile:V}=se(),i=g("login"),s=n=>{y.success(n),h.push("/")};return(n,l)=>(u(),_("div",pe,[o("div",fe,[l[3]||(l[3]=Q('<div class="intro-section" data-v-87682ac1><div class="intro-content" data-v-87682ac1><div class="logo" data-v-87682ac1><div class="logo-icon" data-v-87682ac1>🎨</div><h1 data-v-87682ac1>Ezwork Studio</h1><span class="subtitle" data-v-87682ac1>AI绘画工具客户端</span></div><p class="intro-text" data-v-87682ac1> 释放创意无限可能<br data-v-87682ac1> 让每一个想象都能成为艺术 </p><div class="decoration-elements" data-v-87682ac1><div class="floating-shape shape-1" data-v-87682ac1></div><div class="floating-shape shape-2" data-v-87682ac1></div><div class="floating-shape shape-3" data-v-87682ac1></div></div></div></div>',1)),o("div",_e,[o("div",ve,[f(V)?(u(),_("div",ge,[...l[2]||(l[2]=[o("div",{class:"logo-icon"},"🎨",-1),o("h1",null,"Ezwork Studio",-1),o("span",{class:"subtitle"},"AI绘画工具客户端",-1)])])):W("",!0),o("div",we,[o("button",{class:S(["tab-btn",{active:i.value==="login"}]),onClick:l[0]||(l[0]=d=>i.value="login")}," 登录 ",2),o("button",{class:S(["tab-btn",{active:i.value==="register"}]),onClick:l[1]||(l[1]=d=>i.value="register")}," 注册 ",2),o("div",{class:S(["tab-indicator",{"move-right":i.value==="register"}])},null,2)]),o("div",be,[e(X,{name:"slide",mode:"out-in"},{default:a(()=>[i.value==="login"?(u(),q(re,{key:0,onSuccess:s})):(u(),q(me,{key:1,onSuccess:s}))]),_:1})])])])])]))}},xe=R(ye,[["__scopeId","data-v-87682ac1"]]);export{xe as default};
