import{bG as R,bO as q,a4 as A,x as g,K as _,B as u,E as o,P as e,C as a,H as N,u as f,bP as L,bm as H,bQ as I,Z as O,bK as y,y as B,bR as Q,bS as Z,L as j,N as J,bT as W,G as X,F as z,U as Y,bU as ee,A as F}from"./index-CkVwXh8c.js";import{D as T,E as K,A as D,F as M,B as se}from"./el-form-item-DZp7nGyR.js";import"./format-input-BtFVpa3F.js";const ae={class:"login-form"},te={key:0},oe={key:1},le={__name:"LoginForm",emits:["success"],setup(U,{emit:h}){const V=h,i=q(),s=A({email:"",password:""}),n=g(!1),l=g(),d={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},b=async()=>{try{await l.value?.validate(),n.value=!0;const v=await i.login({email:s.email,login_type:"password",password:s.password});v.success?V("success",v.message):y.error(v.message)}catch(v){console.error("Login validation failed:",v)}finally{n.value=!1}};return(v,m)=>{const C=N,S=K,k=T,E=D,$=M;return u(),_("div",ae,[m[2]||(m[2]=o("div",{class:"form-header"},[o("h2",null,"欢迎回来"),o("p",null,"登录您的账户，继续创作之旅")],-1)),e($,{ref_key:"formRef",ref:l,model:s,rules:d,onSubmit:O(b,["prevent"])},{default:a(()=>[e(k,{prop:"email"},{default:a(()=>[e(S,{modelValue:s.email,"onUpdate:modelValue":m[0]||(m[0]=r=>s.email=r),type:"email",placeholder:"请输入邮箱地址",class:"custom-input",size:"default"},{prefix:a(()=>[e(C,{class:"input-icon"},{default:a(()=>[e(f(L))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(k,{prop:"password"},{default:a(()=>[e(S,{modelValue:s.password,"onUpdate:modelValue":m[1]||(m[1]=r=>s.password=r),type:"password",placeholder:"请输入密码","show-password":"",class:"custom-input",size:"default",onKeyup:H(b,["enter"])},{prefix:a(()=>[e(C,{class:"input-icon"},{default:a(()=>[e(f(I))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(k,{class:"submit-item"},{default:a(()=>[e(E,{type:"primary",class:"login-btn",loading:n.value,onClick:b},{default:a(()=>[n.value?(u(),_("span",oe,"登录中...")):(u(),_("span",te,"立即登录"))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},re=R(le,[["__scopeId","data-v-b92230f0"]]),ne={class:"register-form"},ie={class:"code-input-wrapper"},de={key:0},ue={key:1},ce={__name:"RegisterForm",emits:["success"],setup(U,{emit:h}){const V=h,i=q(),s=A({email:"",username:"",password:"",confirmPassword:"",code:""}),n=g(!1),l=g(!1),d=g(0),b=g(),m={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],username:[{min:2,message:"用户名长度不能少于2位",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(r,t,p)=>{t!==s.password?p(new Error("两次输入的密码不一致")):p()},trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码为6位数字",trigger:"blur"}]},C=B(()=>s.email&&d.value===0&&!l.value),S=B(()=>l.value?"发送中":d.value>0?`${d.value}s`:"发送验证码"),k=async()=>{if(!s.email){y.warning("请先输入邮箱");return}l.value=!0;try{const r=await i.sendVerificationCode(s.email);r.success?(y.success(r.message),E()):y.error(r.message)}finally{l.value=!1}},E=()=>{d.value=60;const r=setInterval(()=>{d.value--,d.value<=0&&clearInterval(r)},1e3)},$=async()=>{try{await b.value?.validate(),n.value=!0;const r={email:s.email,password:s.password,code:s.code};s.username&&(r.username=s.username);const t=await i.register(r);t.success?V("success",t.message):y.error(t.message)}catch(r){console.error("Register validation failed:",r)}finally{n.value=!1}};return(r,t)=>{const p=N,x=K,w=T,P=D,G=M;return u(),_("div",ne,[t[5]||(t[5]=o("div",{class:"form-header"},[o("h2",null,"创建账户"),o("p",null,"加入我们，开启AI创作之旅")],-1)),e(G,{ref_key:"formRef",ref:b,model:s,rules:m},{default:a(()=>[e(w,{prop:"email"},{default:a(()=>[e(x,{modelValue:s.email,"onUpdate:modelValue":t[0]||(t[0]=c=>s.email=c),type:"email",placeholder:"请输入邮箱地址",class:"custom-input",size:"default"},{prefix:a(()=>[e(p,{class:"input-icon"},{default:a(()=>[e(f(L))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(w,{prop:"username"},{default:a(()=>[e(x,{modelValue:s.username,"onUpdate:modelValue":t[1]||(t[1]=c=>s.username=c),placeholder:"请输入用户名（可选）",class:"custom-input",size:"default"},{prefix:a(()=>[e(p,{class:"input-icon"},{default:a(()=>[e(f(Q))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(w,{prop:"code"},{default:a(()=>[o("div",ie,[e(x,{modelValue:s.code,"onUpdate:modelValue":t[2]||(t[2]=c=>s.code=c),placeholder:"请输入验证码",class:"custom-input code-input",size:"default"},{prefix:a(()=>[e(p,{class:"input-icon"},{default:a(()=>[e(f(Z))]),_:1})]),_:1},8,["modelValue"]),e(P,{class:"code-btn",size:"default",loading:l.value,disabled:!C.value,onClick:k},{default:a(()=>[j(J(S.value),1)]),_:1},8,["loading","disabled"])])]),_:1}),e(w,{prop:"password"},{default:a(()=>[e(x,{modelValue:s.password,"onUpdate:modelValue":t[3]||(t[3]=c=>s.password=c),type:"password",placeholder:"请输入密码","show-password":"",class:"custom-input",size:"default"},{prefix:a(()=>[e(p,{class:"input-icon"},{default:a(()=>[e(f(I))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(w,{prop:"confirmPassword"},{default:a(()=>[e(x,{modelValue:s.confirmPassword,"onUpdate:modelValue":t[4]||(t[4]=c=>s.confirmPassword=c),type:"password",placeholder:"请再次输入密码","show-password":"",class:"custom-input",size:"default"},{prefix:a(()=>[e(p,{class:"input-icon"},{default:a(()=>[e(f(I))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(w,{class:"submit-item"},{default:a(()=>[e(P,{type:"primary",class:"register-btn",loading:n.value,onClick:$},{default:a(()=>[n.value?(u(),_("span",ue,"注册中...")):(u(),_("span",de,"立即注册"))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}},me=R(ce,[["__scopeId","data-v-b357d7e0"]]),pe={class:"auth-container"},fe={class:"auth-content"},_e={class:"form-section"},ve={class:"form-container"},ge={key:0,class:"mobile-logo"},be={class:"tab-switcher"},we={class:"form-content"},ye={__name:"index",setup(U){const h=ee(),{isMobile:V}=se(),i=g("login"),s=n=>{y.success(n),h.push("/")};return(n,l)=>(u(),_("div",pe,[o("div",fe,[l[3]||(l[3]=W('<div class="intro-section" data-v-d11cab8d><div class="intro-content" data-v-d11cab8d><div class="logo" data-v-d11cab8d><div class="logo-icon" data-v-d11cab8d>🎨</div><h1 data-v-d11cab8d>Ezwork Studio</h1><span class="subtitle" data-v-d11cab8d>AI绘画工具客户端</span></div><p class="intro-text" data-v-d11cab8d> 释放创意无限可能<br data-v-d11cab8d> 让每一个想象都能成为艺术 </p><div class="decoration-elements" data-v-d11cab8d><div class="floating-shape shape-1" data-v-d11cab8d></div><div class="floating-shape shape-2" data-v-d11cab8d></div><div class="floating-shape shape-3" data-v-d11cab8d></div></div></div></div>',1)),o("div",_e,[o("div",ve,[f(V)?(u(),_("div",ge,[...l[2]||(l[2]=[o("div",{class:"logo-icon"},"🎨",-1),o("h1",null,"Ezwork Studio",-1),o("span",{class:"subtitle"},"AI绘画工具客户端",-1)])])):X("",!0),o("div",be,[o("button",{class:z(["tab-btn",{active:i.value==="login"}]),onClick:l[0]||(l[0]=d=>i.value="login")}," 登录 ",2),o("button",{class:z(["tab-btn",{active:i.value==="register"}]),onClick:l[1]||(l[1]=d=>i.value="register")}," 注册 ",2),o("div",{class:z(["tab-indicator",{"move-right":i.value==="register"}])},null,2)]),o("div",we,[e(Y,{name:"slide",mode:"out-in"},{default:a(()=>[i.value==="login"?(u(),F(re,{key:0,onSuccess:s})):(u(),F(me,{key:1,onSuccess:s}))]),_:1})])])])])]))}},xe=R(ye,[["__scopeId","data-v-d11cab8d"]]);export{xe as default};
